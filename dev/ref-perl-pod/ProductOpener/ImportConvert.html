<html><head><title>ProductOpener::ImportConvert</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Fri Dec 15 09:00:34 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#assign_quantity_from_field_(_%24product_ref%2C_%24field_)'>assign_quantity_from_field ( $product_ref, $field )</a>
    <li class='indexItem indexItem2'><a href='#remove_quantity_from_field_(_%24product_ref%2C_%24field_)'>remove_quantity_from_field ( $product_ref, $field )</a>
    <li class='indexItem indexItem2'><a href='#clean_fields_(_%24imported_product_ref_)'>clean_fields ( $imported_product_ref )</a>
    <li class='indexItem indexItem2'><a href='#extract_nutrition_facts_from_text_(_LC%2C_TEXT%2C_NUTRIENTS_REF_)'>extract_nutrition_facts_from_text ( LC, TEXT, NUTRIENTS_REF )</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#LC_-_Language_code'>LC - Language code</a>
        <li class='indexItem indexItem4'><a href='#TEXT_-_Language_code'>TEXT - Language code</a>
        <li class='indexItem indexItem4'><a href='#NUTRIENTS_REF'>NUTRIENTS_REF</a>
        <li class='indexItem indexItem4'><a href='#NUTRITION_DATA_PER_REF_-_Per_100g_or_per_serving'>NUTRITION_DATA_PER_REF - Per 100g or per serving</a>
        <li class='indexItem indexItem4'><a href='#SERVING_SIZE_REF_-_Serving_size'>SERVING_SIZE_REF - Serving size</a>
      </ul>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::ImportConvert - help to convert product data files from producers to the Open Food Facts format.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p><code>ProductOpener::ImportConvert</code> provides functions to load and process CSV and XML files to convert the product data they contain to a format that can be imported on Open Food Facts.</p>

<pre>    use ProductOpener::ImportConvert qw/:all/;</pre>

<p>..</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>..</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="assign_quantity_from_field_(_$product_ref,_$field_)"
>assign_quantity_from_field ( $product_ref, $field )</a></h2>

<p>Look for a quantity in a field like a product name. Assign it to the quantity and remove it from the field.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="remove_quantity_from_field_(_$product_ref,_$field_)"
>remove_quantity_from_field ( $product_ref, $field )</a></h2>

<p>Look for the quantity in a field like a product name. If found, remove it from the field.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="clean_fields_(_$imported_product_ref_)"
>clean_fields ( $imported_product_ref )</a></h2>

<p>This function: - extracts values from some fields to populate other fields (e.g. the quantity can be passed in the product name) - split some field values (e.g. remove the brand from the product name) - cleans the fields</p>

<p>Warning: this function is intended to be applied only to imported product data. It should not be used on general products, as some of the cleaning may be too aggressive in the general case. e.g. if the ingredients field is of the form &#34;something Ingredients: list of ingredients&#34;, then &#34;something&#34; is assigned to the generic name of the product.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="extract_nutrition_facts_from_text_(_LC,_TEXT,_NUTRIENTS_REF_)"
>extract_nutrition_facts_from_text ( LC, TEXT, NUTRIENTS_REF )</a></h2>

<p><code>extract_nutrition_facts_from_text()</code> extract nutrition facts from a text blob and return a hash structure that maps Open Food Facts nutrient ids to the value, unit and modifier.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="LC_-_Language_code"
>LC - Language code</a></h4>

<p>The language the text is in.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="TEXT_-_Language_code"
>TEXT - Language code</a></h4>

<p>The text that contains the nutrition facts.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NUTRIENTS_REF"
>NUTRIENTS_REF</a></h4>

<p>Reference to a hash that will be used to return structured data for the nutrition facts found in the text.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="NUTRITION_DATA_PER_REF_-_Per_100g_or_per_serving"
>NUTRITION_DATA_PER_REF - Per 100g or per serving</a></h4>

<p>Reference to a scalar that will be set to the serving size if the nutrition facts are indicated per serving.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="SERVING_SIZE_REF_-_Serving_size"
>SERVING_SIZE_REF - Serving size</a></h4>

<p>Reference to a scalar that will be set to the serving size if the nutrition facts are indicated per serving.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
