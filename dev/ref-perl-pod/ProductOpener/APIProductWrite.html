<html><head><title>ProductOpener::APIProductWrite</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Thu Oct  2 10:35:20 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#skip_protected_field(%24product_ref%2C_%24field%2C_%24moderator_%3D_0)'>skip_protected_field($product_ref, $field, $moderator = 0)</a>
    <li class='indexItem indexItem2'><a href='#update_field_with_0_or_1_value(%24request_ref%2C_%24product_ref%2C_%24field%2C_%24value)'>update_field_with_0_or_1_value($request_ref, $product_ref, $field, $value)</a>
    <li class='indexItem indexItem2'><a href='#update_packagings(%24request_ref%2C_%24product_ref%2C_%24field%2C_%24add_to_existing_components%2C_%24value)'>update_packagings($request_ref, $product_ref, $field, $add_to_existing_components, $value)</a>
    <li class='indexItem indexItem2'><a href='#update_tags_fields_(%24request_ref%2C_%24product_ref%2C_%24field%2C_%24add_to_existing_tags%2C_%24value)'>update_tags_fields ($request_ref, $product_ref, $field, $add_to_existing_tags, $value)</a>
    <li class='indexItem indexItem2'><a href='#update_product_fields_(%24request_ref%2C_%24product_ref%2C_%24response_ref)'>update_product_fields ($request_ref, $product_ref, $response_ref)</a>
    <li class='indexItem indexItem2'><a href='#update_images_selected(%24request_ref%2C_%24product_ref%2C_%24response_ref)'>update_images_selected($request_ref, $product_ref, $response_ref)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Parameters'>Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24request_ref_(input)'>$request_ref (input)</a>
        <li class='indexItem indexItem4'><a href='#%24product_ref_(input)'>$product_ref (input)</a>
        <li class='indexItem indexItem4'><a href='#%24response_ref_(input)'>$response_ref (input)</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#process_change_product_code_request_if_we_have_one(%24request_ref%2C_%24response_ref%2C_%24product_ref%2C_%24new_code)'>process_change_product_code_request_if_we_have_one($request_ref, $response_ref, $product_ref, $new_code)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Parameters'>Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24request_ref_(input)'>$request_ref (input)</a>
        <li class='indexItem indexItem4'><a href='#%24response_ref_(input)'>$response_ref (input)</a>
        <li class='indexItem indexItem4'><a href='#%24product_ref_(input)'>$product_ref (input)</a>
        <li class='indexItem indexItem4'><a href='#%24new_code_(input)'>$new_code (input)</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_value'>Return value</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#write_product_api(%24request_ref)'>write_product_api($request_ref)</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::APIProductWrite - implementation of WRITE API for creating and updating products</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="skip_protected_field($product_ref,_$field,_$moderator_=_0)"
>skip_protected_field($product_ref,
$field,
$moderator = 0)</a></h2>

<p>Return 1 if we should ignore a field value sent by a user because we already have a value sent by the producer.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_field_with_0_or_1_value($request_ref,_$product_ref,_$field,_$value)"
>update_field_with_0_or_1_value($request_ref,
$product_ref,
$field,
$value)</a></h2>

<p>Update a field that takes only 0 or 1 as a value (e.g.
packagings_complete).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_packagings($request_ref,_$product_ref,_$field,_$add_to_existing_components,_$value)"
>update_packagings($request_ref,
$product_ref,
$field,
$add_to_existing_components,
$value)</a></h2>

<p>Update packagings.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_tags_fields_($request_ref,_$product_ref,_$field,_$add_to_existing_tags,_$value)"
>update_tags_fields ($request_ref,
$product_ref,
$field,
$add_to_existing_tags,
$value)</a></h2>

<p>Update packagings.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_product_fields_($request_ref,_$product_ref,_$response_ref)"
>update_product_fields ($request_ref,
$product_ref,
$response_ref)</a></h2>

<p>Update product fields based on input product data.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="update_images_selected($request_ref,_$product_ref,_$response_ref)"
>update_images_selected($request_ref,
$product_ref,
$response_ref)</a></h2>

<p>Select and crop images based on images.selected</p>

<p>This function is called by the product WRITE API,
but also by the product image upload API when the caller uploads and image and wants to select it at the same time.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parameters"
>Parameters</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$request_ref_(input)"
>$request_ref (input)</a></h4>

<p>Reference to the request object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$product_ref_(input)"
>$product_ref (input)</a></h4>

<p>Reference to the product object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$response_ref_(input)"
>$response_ref (input)</a></h4>

<p>Reference to the response object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="process_change_product_code_request_if_we_have_one($request_ref,_$response_ref,_$product_ref,_$new_code)"
>process_change_product_code_request_if_we_have_one($request_ref,
$response_ref,
$product_ref,
$new_code)</a></h2>

<p>Process a change of code request if we have one.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parameters"
>Parameters</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$request_ref_(input)"
>$request_ref (input)</a></h4>

<p>Reference to the request object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$response_ref_(input)"
>$response_ref (input)</a></h4>

<p>Reference to the response object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$product_ref_(input)"
>$product_ref (input)</a></h4>

<p>Reference to the product object.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$new_code_(input)"
>$new_code (input)</a></h4>

<p>New code.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_value"
>Return value</a></h3>

<p>undef if we don&#39;t have a change product code request,
or if it was processed correctly.
an error id if there was an error (e.g.
no_permisssion or invalid_product_type).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="write_product_api($request_ref)"
>write_product_api($request_ref)</a></h2>

<p>Process API v3 WRITE product requests.</p>

<p>TODO: v0 / v1 / v2 WRITE product requests are still handled by cgi/product_jqm_multilingual.pl which contains similar code.
Internally,
we should be able to upgrade those requests to v3,
and then customize the response to make it return the v2 expected response.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
