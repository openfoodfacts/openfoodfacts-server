<html><head><title>ProductOpener::Nutrition</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Wed Oct 15 08:09:18 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#generate_nutrient_aggregated_set_from_sets'>generate_nutrient_aggregated_set_from_sets</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24input_sets_ref'>$input_sets_ref</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_values'>Return values</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#sort_sets_by_priority'>sort_sets_by_priority</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%40input_sets'>@input_sets</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_values'>Return values</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#set_nutrient_values'>set_nutrient_values</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24aggregated_nutrient_set_ref'>$aggregated_nutrient_set_ref</a>
        <li class='indexItem indexItem4'><a href='#%40input_sets'>@input_sets</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#convert_nutrient_to_standard_unit'>convert_nutrient_to_standard_unit</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24nutrient_ref'>$nutrient_ref</a>
        <li class='indexItem indexItem4'><a href='#%24nutrient_name'>$nutrient_name</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#convert_nutrient_to_100g'>convert_nutrient_to_100g</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24nutrient_ref'>$nutrient_ref</a>
        <li class='indexItem indexItem4'><a href='#%24original_per_quantity'>$original_per_quantity</a>
        <li class='indexItem indexItem4'><a href='#%24original_per_unit'>$original_per_unit</a>
        <li class='indexItem indexItem4'><a href='#%24wanted_per_quantity'>$wanted_per_quantity</a>
        <li class='indexItem indexItem4'><a href='#%24wanted_per_unit'>$wanted_per_unit</a>
      </ul>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::Nutrition - functions related to nutrition facts of food products</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><code>ProductOpener::Nutrition</code> contains functions specific to food products,
in particular related to the new schema of nutrition facts.
This module provides functions It does not contain functions related to ingredients which are in the <code>ProductOpener::Ingredients</code> module.</p>

<p>..</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="generate_nutrient_aggregated_set_from_sets"
>generate_nutrient_aggregated_set_from_sets</a></h2>

<p>Generates and returns a hash reference of the aggregated nutrient set from the given list of nutrient sets.</p>

<p>The generated set is a combined set of nutrients with the preferred sources,
per references and preparation states and with normalized units.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$input_sets_ref"
>$input_sets_ref</a></h4>

<p>Array of nutrients sets used to generate the aggregated set</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_values"
>Return values</a></h3>

<p>The generated aggregated nutrient set</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="sort_sets_by_priority"
>sort_sets_by_priority</a></h2>

<p>Sorts hashes of nutrient sets in a given array based on a custom priority.</p>

<p>The priority is based on the sources,
the per references and the preparation states present in the nutrient sets.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="@input_sets"
>@input_sets</a></h4>

<p>Unsorted array nutrient sets hashes</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_values"
>Return values</a></h3>

<p>Sorted array nutrient sets hashes</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="set_nutrient_values"
>set_nutrient_values</a></h2>

<p>For each nutrient appearing in the nutrient sets array,
sets its values in the aggregated set.</p>

<p>The units of the nutrients quantities are normalized (g,
kJ or kcal).</p>

<p>Each nutrient is only added once.
Its value is the one in the set with the highest priority.</p>

<p>If the preparation value in a set is different from the one in the aggregated set,
the nutrient is not added to the aggregated set.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$aggregated_nutrient_set_ref"
>$aggregated_nutrient_set_ref</a></h4>

<p>The generated aggregated nutrient set.</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="@input_sets"
>@input_sets</a></h4>

<p>The sorted array of nutrient set hashes used to generate the aggregated set.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convert_nutrient_to_standard_unit"
>convert_nutrient_to_standard_unit</a></h2>

<p>Normalizes the unit of the nutrient value if necessary.</p>

<p>The normalized units are g,
kJ or kcal based on the nutrient.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$nutrient_ref"
>$nutrient_ref</a></h4>

<p>Hash of the nutrient to normalize</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$nutrient_name"
>$nutrient_name</a></h4>

<p>Name of the nutrient to normalize</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convert_nutrient_to_100g"
>convert_nutrient_to_100g</a></h2>

<p>Converts the value of the amount of the nutrient based on the wanted per reference if necessary.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$nutrient_ref"
>$nutrient_ref</a></h4>

<p>Hash of the nutrient set with the value to convert</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$original_per_quantity"
>$original_per_quantity</a></h4>

<p>Current per amount of the nutrient</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$original_per_unit"
>$original_per_unit</a></h4>

<p>Current per unit of the nutrient</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$wanted_per_quantity"
>$wanted_per_quantity</a></h4>

<p>Wanted per amount of the nutrient</p>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$wanted_per_unit"
>$wanted_per_unit</a></h4>

<p>Wanted per unit of the nutrient</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
