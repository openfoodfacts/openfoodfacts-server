<html><head><title>ProductOpener::TaxonomySuggestions</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Fri Sep 12 07:55:10 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#get_taxonomy_suggestions_with_synonyms_(%24tagtype%2C_%24search_lc%2C_%24string%2C_%24context_ref%2C_%24options_ref_)'>get_taxonomy_suggestions_with_synonyms ($tagtype, $search_lc, $string, $context_ref, $options_ref )</a>
    <li class='indexItem indexItem2'><a href='#get_taxonomy_suggestions_(%24tagtype%2C_%24search_lc%2C_%24string%2C_%24context_ref%2C_%24options_ref_)'>get_taxonomy_suggestions ($tagtype, $search_lc, $string, $context_ref, $options_ref )</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Parameters'>Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24tagtype_id_of_the_taxonomy_(required)'>$tagtype id of the taxonomy (required)</a>
        <li class='indexItem indexItem4'><a href='#%24search_lc_language_of_parameters_(categories%2C_shape%2C_material_etc.)_and_of_the_returned_suggestions_(required)'>$search_lc language of parameters (categories, shape, material etc.) and of the returned suggestions (required)</a>
        <li class='indexItem indexItem4'><a href='#%24string_string_to_query_(e.g._for_autocompletion)_(optional)'>$string string to query (e.g. for autocompletion) (optional)</a>
        <li class='indexItem indexItem4'><a href='#%24context_ref_context_object'>$context_ref context object</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Note'>Note</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#generate_sorted_list_of_taxonomy_entries(%24tagtype%2C_%24search_lc%2C_%24context_ref)'>generate_sorted_list_of_taxonomy_entries($tagtype, $search_lc, $context_ref)</a>
    <li class='indexItem indexItem2'><a href='#generate_popular_suggestions_according_to_context(%24tagtype%2C_%24search_lc%2C_%24context_ref%2C_%24seen_tags_ref)'>generate_popular_suggestions_according_to_context($tagtype, $search_lc, $context_ref, $seen_tags_ref)</a>
    <li class='indexItem indexItem2'><a href='#add_sorted_entries_to_tags(%24tags_ref%2C_%24seen_tags_ref%2C_%24entries_ref%2C_%24tagtype%2C_%24search_lc)'>add_sorted_entries_to_tags($tags_ref, $seen_tags_ref, $entries_ref, $tagtype, $search_lc)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Parameters'>Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24tags_ref_points_to_the_list_we_want_to_appends_tags_to'>$tags_ref points to the list we want to appends tags to</a>
        <li class='indexItem indexItem4'><a href='#%24seen_tags_ref_point_to_a_hashmap_of_entries_already_in_%24tags_ref'>$seen_tags_ref point to a hashmap of entries already in $tags_ref</a>
        <li class='indexItem indexItem4'><a href='#%24entries_ref_point_to_a_hashmap_where_keys_are_tags_and_values_represent_tag_priority'>$entries_ref point to a hashmap where keys are tags and values represent tag priority</a>
        <li class='indexItem indexItem4'><a href='#%24tagtype_-_type_of_tag_necessary_to_use_right_translations_for_alphabetical_sort_(see_Tags.pm)'>$tagtype - type of tag necessary to use right translations for alphabetical sort (see Tags.pm)</a>
        <li class='indexItem indexItem4'><a href='#%24search_lc_-_is_the_target_language_for_translations'>$search_lc - is the target language for translations</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#filter_suggestions_matching_string_with_synonyms_(%24tags_ref%2C_%24tagtype%2C_%24search_lc%2C_%24string%2C_%24options_ref)'>filter_suggestions_matching_string_with_synonyms ($tags_ref, $tagtype, $search_lc, $string, $options_ref)</a>
    <li class='indexItem indexItem2'><a href='#filter_suggestions_matching_string_(%24tags_ref%2C_%24tagtype%2C_%24search_lc%2C_%24string%2C_%24options_ref)'>filter_suggestions_matching_string ($tags_ref, $tagtype, $search_lc, $string, $options_ref)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Parameters'>Parameters</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#%24tags_ref_reference_to_an_array_of_tags_that_needs_to_be_filtered'>$tags_ref reference to an array of tags that needs to be filtered</a>
        <li class='indexItem indexItem4'><a href='#%24tagtype_the_type_of_tag'>$tagtype the type of tag</a>
        <li class='indexItem indexItem4'><a href='#%24search_lc_language_code_of_taxonomy_suggestions_to_return'>$search_lc language code of taxonomy suggestions to return</a>
        <li class='indexItem indexItem4'><a href='#%24string_string_to_search'>$string string to search</a>
        <li class='indexItem indexItem4'><a href='#%24options_ref_hash_of_options'>$options_ref hash of options</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_value'>Return value</a>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::TaxonomySuggestions - suggests taxonomy entries for dropdown,
autocomplete etc.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_taxonomy_suggestions_with_synonyms_($tagtype,_$search_lc,_$string,_$context_ref,_$options_ref_)"
>get_taxonomy_suggestions_with_synonyms ($tagtype,
$search_lc,
$string,
$context_ref,
$options_ref )</a></h2>

<p>Generate taxonomy suggestions with matched synonyms information.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_taxonomy_suggestions_($tagtype,_$search_lc,_$string,_$context_ref,_$options_ref_)"
>get_taxonomy_suggestions ($tagtype,
$search_lc,
$string,
$context_ref,
$options_ref )</a></h2>

<p>Generate taxonomy suggestions (without matched synonyms information).</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parameters"
>Parameters</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$tagtype_id_of_the_taxonomy_(required)"
>$tagtype id of the taxonomy (required)</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$search_lc_language_of_parameters_(categories,_shape,_material_etc.)_and_of_the_returned_suggestions_(required)"
>$search_lc language of parameters (categories,
shape,
material etc.) and of the returned suggestions (required)</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$string_string_to_query_(e.g._for_autocompletion)_(optional)"
>$string string to query (e.g.
for autocompletion) (optional)</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$context_ref_context_object"
>$context_ref context object</a></h4>

<p>Hash of fields that can be taken into account to generate relevant suggestions</p>

<p>- country: derived from the cc parameter - categories: comma separated list of categories (tags ids or strings in the $search_lc language) - shape: packaging shape (tag id or string in the $search_lc language)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Note"
>Note</a></h3>

<p>The results of this function are cached for 1 day using memcached.
Restart memcached if you want fresh results (e.g.
when taxonomy are category stats change).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="generate_sorted_list_of_taxonomy_entries($tagtype,_$search_lc,_$context_ref)"
>generate_sorted_list_of_taxonomy_entries($tagtype,
$search_lc,
$context_ref)</a></h2>

<p>Generate a sorted list of canonicalized taxonomy entries from which we will generate suggestions</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="generate_popular_suggestions_according_to_context($tagtype,_$search_lc,_$context_ref,_$seen_tags_ref)"
>generate_popular_suggestions_according_to_context($tagtype,
$search_lc,
$context_ref,
$seen_tags_ref)</a></h2>

<p>Given a specific context (e.g.
the product&#39;s country,
categories,
or the packaging component shape),
we can generate popular suggestions sorted by popularity in this context.</p>

<p>Currently supports packaging_shapes and packaging_materials</p>

<p>For other taxonomy types,
an empty list is returned.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="add_sorted_entries_to_tags($tags_ref,_$seen_tags_ref,_$entries_ref,_$tagtype,_$search_lc)"
>add_sorted_entries_to_tags($tags_ref,
$seen_tags_ref,
$entries_ref,
$tagtype,
$search_lc)</a></h2>

<p>Add packaging entries (shapes or materials) sorted by frequency for a specific country,
category and shape (for materials)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parameters"
>Parameters</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$tags_ref_points_to_the_list_we_want_to_appends_tags_to"
>$tags_ref points to the list we want to appends tags to</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$seen_tags_ref_point_to_a_hashmap_of_entries_already_in_$tags_ref"
>$seen_tags_ref point to a hashmap of entries already in $tags_ref</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$entries_ref_point_to_a_hashmap_where_keys_are_tags_and_values_represent_tag_priority"
>$entries_ref point to a hashmap where keys are tags and values represent tag priority</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$tagtype_-_type_of_tag_necessary_to_use_right_translations_for_alphabetical_sort_(see_Tags.pm)"
>$tagtype - type of tag necessary to use right translations for alphabetical sort (see Tags.pm)</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$search_lc_-_is_the_target_language_for_translations"
>$search_lc - is the target language for translations</a></h4>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="filter_suggestions_matching_string_with_synonyms_($tags_ref,_$tagtype,_$search_lc,_$string,_$options_ref)"
>filter_suggestions_matching_string_with_synonyms ($tags_ref,
$tagtype,
$search_lc,
$string,
$options_ref)</a></h2>

<p>Filter a list of potential taxonomy suggestions matching a string with matched synonyms information.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="filter_suggestions_matching_string_($tags_ref,_$tagtype,_$search_lc,_$string,_$options_ref)"
>filter_suggestions_matching_string ($tags_ref,
$tagtype,
$search_lc,
$string,
$options_ref)</a></h2>

<p>Filter a list of potential taxonomy suggestions matching a string (without matched synonyms information).</p>

<p>By priority,
the function returns: - taxonomy entries that match the input string at the beginning - taxonomy entries that contain the input string - taxonomy entries that contain words contained in the input string (with other words between)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Parameters"
>Parameters</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$tags_ref_reference_to_an_array_of_tags_that_needs_to_be_filtered"
>$tags_ref reference to an array of tags that needs to be filtered</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$tagtype_the_type_of_tag"
>$tagtype the type of tag</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$search_lc_language_code_of_taxonomy_suggestions_to_return"
>$search_lc language code of taxonomy suggestions to return</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$string_string_to_search"
>$string string to search</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="$options_ref_hash_of_options"
>$options_ref hash of options</a></h4>

<p>- limit: limit of number of results - format (not yet defined and implemented)</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_value"
>Return value</a></h3>

<p>An array of suggestions hashes with the following fields: - tag: the tag to suggest - matched_synonym: the synonym that matched the input string</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
