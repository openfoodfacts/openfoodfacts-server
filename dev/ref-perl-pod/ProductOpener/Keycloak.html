<html><head><title>ProductOpener::Keycloak</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Tue Oct 21 11:14:42 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#get_or_refresh_token()'>get_or_refresh_token()</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <li class='indexItem indexItem3'><a href='#Return_values'>Return values</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#create_or_update_user_(%24user_ref%2C_%24password)'>create_or_update_user ($user_ref, $password)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#User_info_hashmap_reference_%24user_ref'>User info hashmap reference $user_ref</a>
        <li class='indexItem indexItem4'><a href='#String_%24password'>String $password</a>
      </ul>
    </ul>
    <li class='indexItem indexItem2'><a href='#find_user_by_username_(%24username)'>find_user_by_username ($username)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#User%27s_user_id_%24user_id'>User&#39;s user id $user_id</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_Value'>Return Value</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#find_user_by_email_(%24mail)'>find_user_by_email ($mail)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#User%27s_mail_address_%24mail'>User&#39;s mail address $mail</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_Value'>Return Value</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#get_account_link()'>get_account_link()</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#Canonical_URL_of_the_current_site_string_%24url'>Canonical URL of the current site string $url</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_values'>Return values</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#_find_user_by_single_attribute_exact_(%24name%2C_%24value)'>_find_user_by_single_attribute_exact ($name, $value)</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Arguments'>Arguments</a>
      <ul   class='indexList indexList4'>
        <li class='indexItem indexItem4'><a href='#Name_of_the_attribute_%24name'>Name of the attribute $name</a>
        <li class='indexItem indexItem4'><a href='#Value_of_the_attribute_%24value'>Value of the attribute $value</a>
      </ul>
      <li class='indexItem indexItem3'><a href='#Return_Value'>Return Value</a>
    </ul>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::Keycloak - Perl module for Keycloak user management</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This Perl module provides access to Keycloak specific functionality that goes beyond that of a standard OIDC authentication service.</p>

<p>This includes user management APIs and the user security settings forms.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_or_refresh_token()"
>get_or_refresh_token()</a></h2>

<p>Retrieves or refreshes the access token for managing users with Keycloak.</p>

<p>If the token is not defined,
it retrieves a new token using client credentials.
If the token is defined but has expired,
it refreshes the token.
The token is stored in the object and its expiration time is updated.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<p>None</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_values"
>Return values</a></h3>

<p>Returns the access token.
Throws an exception if the token cannot be obtained.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="create_or_update_user_($user_ref,_$password)"
>create_or_update_user ($user_ref,
$password)</a></h2>

<p>Create use on keycloak side.</p>

<p>This is needed as we register new users via an old,
undocumented API function.
We create the user properties file locally before,
and we create the user in keycloak in this sub.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="User_info_hashmap_reference_$user_ref"
>User info hashmap reference $user_ref</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="String_$password"
>String $password</a></h4>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="find_user_by_username_($username)"
>find_user_by_username ($username)</a></h2>

<p>Try to find a user in Keycloak by their username.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="User&#39;s_user_id_$user_id"
>User&#39;s user id $user_id</a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_Value"
>Return Value</a></h3>

<p>A hashmap reference with user information from Keycloak mapped onto PO user fields</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="find_user_by_email_($mail)"
>find_user_by_email ($mail)</a></h2>

<p>Try to find a user in Keycloak by their mail address.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="User&#39;s_mail_address_$mail"
>User&#39;s mail address $mail</a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_Value"
>Return Value</a></h3>

<p>A hashmap reference with user information from Keycloak.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_account_link()"
>get_account_link()</a></h2>

<p>Gets the link to the account service on Keycloak.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Canonical_URL_of_the_current_site_string_$url"
>Canonical URL of the current site string $url</a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_values"
>Return values</a></h3>

<p>Returns the URL.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_find_user_by_single_attribute_exact_($name,_$value)"
>_find_user_by_single_attribute_exact ($name,
$value)</a></h2>

<p>Try to find a user in Keycloak by a single attribute key/value combo.</p>

<p>This should only be used with unique attributes like email or username.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Arguments"
>Arguments</a></h3>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Name_of_the_attribute_$name"
>Name of the attribute $name</a></h4>

<h4><a class='u' href='#___top' title='click to go to top of document'
name="Value_of_the_attribute_$value"
>Value of the attribute $value</a></h4>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return_Value"
>Return Value</a></h3>

<p>A hashmap reference with user information from Keycloak.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
