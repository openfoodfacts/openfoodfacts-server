<html><head><title>ProductOpener::Paths</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.43,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.038002 at Mon Mar 24 15:20:04 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#VARIABLES'>VARIABLES</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%25BASE_DIRS'>%BASE_DIRS</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#%24BASE_DIRS%7BSCRIPTS%7D'>$BASE_DIRS{SCRIPTS}</a>
      <li class='indexItem indexItem3'><a href='#%24BASE_DIRS%7BLOGS%7D'>$BASE_DIRS{LOGS}</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BORGS%7D'>$BASE_DIRS{ORGS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BUSERS%7D'>$BASE_DIRS{USERS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPRODUCTS%7D'>$BASE_DIRS{PRODUCTS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BTAXONOMIES_SRC%7D'>$BASE_DIRS{TAXONOMIES_SRC}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BCONF%7D'>$BASE_DIRS{CONF}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPRIVATE_DATA%7D'>$BASE_DIRS{PRIVATE_DATA}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BLANG%7D'>$BASE_DIRS{LANG}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BIMPORT_FILES%7D'>$BASE_DIRS{IMPORT_FILES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BEXPORT_FILES%7D'>$BASE_DIRS{EXPORT_FILES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPRODUCTS_IMAGES%7D'>$BASE_DIRS{PRODUCTS_IMAGES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BCACHE_TMP%7D'>$BASE_DIRS{CACHE_TMP}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BCACHE_NEW_IMAGES%7D'>$BASE_DIRS{CACHE_NEW_IMAGES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BCACHE_DEBUG%7D'>$BASE_DIRS{CACHE_DEBUG}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BCACHE_BUILD%7D'>$BASE_DIRS{CACHE_BUILD}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BDELETED_PRODUCTS%7D'>$BASE_DIRS{DELETED_PRODUCTS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BDELETED_PRODUCTS_IMAGES%7D'>$BASE_DIRS{DELETED_PRODUCTS_IMAGES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BDELETED_PRIVATE_PRODUCTS%7D'>$BASE_DIRS{DELETED_PRIVATE_PRODUCTS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BDELETED_IMAGES%7D'>$BASE_DIRS{DELETED_IMAGES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BREVERTED_PRODUCTS%7D'>$BASE_DIRS{REVERTED_PRODUCTS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BFILES_DEBUG%7D'>$BASE_DIRS{FILES_DEBUG}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPUBLIC_DATA%7D'>$BASE_DIRS{PUBLIC_DATA}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPUBLIC_DUMP%7D'>$BASE_DIRS{PUBLIC_DUMP}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPUBLIC_FILES%7D'>$BASE_DIRS{PUBLIC_FILES}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BPUBLIC_EXPORTS%7D'>$BASE_DIRS{PUBLIC_EXPORTS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BUSERS_TRANSLATIONS%7D'>$BASE_DIRS{USERS_TRANSLATIONS}</a>
    <li class='indexItem indexItem2'><a href='#%24BASE_DIRS%7BSFTP_HOME%7D'>$BASE_DIRS{SFTP_HOME}</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#get_files_for_taxonomy(_%24tagtype_)'>get_files_for_taxonomy( $tagtype )</a>
    <li class='indexItem indexItem2'><a href='#get_path_for_taxonomy(_%24tagtype%2C_%24product_type_)'>get_path_for_taxonomy( $tagtype, $product_type )</a>
    <li class='indexItem indexItem2'><a href='#base_paths()'>base_paths()</a>
    <li class='indexItem indexItem2'><a href='#check_missing_dirs()'>check_missing_dirs()</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Return'>Return</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#ensure_dir_created(%24path%2C_%24mode%3Doct(755))'>ensure_dir_created($path, $mode=oct(755))</a>
    <li class='indexItem indexItem2'><a href='#ensure_dir_created_or_die(%24path%2C_%24mode%3D0755)'>ensure_dir_created_or_die($path, $mode=0755)</a>
    <li class='indexItem indexItem2'><a href='#base_paths_loading_script()'>base_paths_loading_script()</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::Paths - functions to get,
check and initialize important directories</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>&#8230;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VARIABLES"
>VARIABLES</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="%BASE_DIRS"
>%BASE_DIRS</a></h2>

<p>A hashmap containing references to base directories</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{SCRIPTS}"
>$BASE_DIRS{SCRIPTS}</a></h3>

<p>Directory for scripts</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{LOGS}"
>$BASE_DIRS{LOGS}</a></h3>

<p>Directory for logging</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{ORGS}"
>$BASE_DIRS{ORGS}</a></h2>

<p>Directory containing sto of organizations</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{USERS}"
>$BASE_DIRS{USERS}</a></h2>

<p>Directory containing sto of users</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PRODUCTS}"
>$BASE_DIRS{PRODUCTS}</a></h2>

<p>Directory containing sto of products</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{TAXONOMIES_SRC}"
>$BASE_DIRS{TAXONOMIES_SRC}</a></h2>

<p>Directory containing txt taxonomies</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{CONF}"
>$BASE_DIRS{CONF}</a></h2>

<p>Directory containing configuration files</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PRIVATE_DATA}"
>$BASE_DIRS{PRIVATE_DATA}</a></h2>

<p>Directory for private data</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{LANG}"
>$BASE_DIRS{LANG}</a></h2>

<p>Directory with language files (.po).
Normally linked to openfoodfacts-web</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{IMPORT_FILES}"
>$BASE_DIRS{IMPORT_FILES}</a></h2>

<p>files to import in producer platform</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{EXPORT_FILES}"
>$BASE_DIRS{EXPORT_FILES}</a></h2>

<p>files to export from producer platform to public platform</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PRODUCTS_IMAGES}"
>$BASE_DIRS{PRODUCTS_IMAGES}</a></h2>

<p>product images is a big directory,
normally a volume of its own</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{CACHE_TMP}"
>$BASE_DIRS{CACHE_TMP}</a></h2>

<p>temporary files we manage locally</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{CACHE_NEW_IMAGES}"
>$BASE_DIRS{CACHE_NEW_IMAGES}</a></h2>

<p>A directory to link newly updated images in order to apply processing (like OCR)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{CACHE_DEBUG}"
>$BASE_DIRS{CACHE_DEBUG}</a></h2>

<p>Temporary files for debugging purposes</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{CACHE_BUILD}"
>$BASE_DIRS{CACHE_BUILD}</a></h2>

<p>Files needed for various build phases - eg taxonomy and cached</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{DELETED_PRODUCTS}"
>$BASE_DIRS{DELETED_PRODUCTS}</a></h2>

<p>Products deleted from the public platform</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{DELETED_PRODUCTS_IMAGES}"
>$BASE_DIRS{DELETED_PRODUCTS_IMAGES}</a></h2>

<p>Products deleted from the public platform</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{DELETED_PRIVATE_PRODUCTS}"
>$BASE_DIRS{DELETED_PRIVATE_PRODUCTS}</a></h2>

<p>Products deleted from the producers platform</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{DELETED_IMAGES}"
>$BASE_DIRS{DELETED_IMAGES}</a></h2>

<p>A directory to store deleted images (not accessible from web)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{REVERTED_PRODUCTS}"
>$BASE_DIRS{REVERTED_PRODUCTS}</a></h2>

<p>A directory where we store revisions we reverted for some products</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{FILES_DEBUG}"
>$BASE_DIRS{FILES_DEBUG}</a></h2>

<p>A directory used to debug knowledge panels</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PUBLIC_DATA}"
>$BASE_DIRS{PUBLIC_DATA}</a></h2>

<p>The main public data directory where database dumps are published along with other assets</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PUBLIC_DUMP}"
>$BASE_DIRS{PUBLIC_DUMP}</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PUBLIC_FILES}"
>$BASE_DIRS{PUBLIC_FILES}</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{PUBLIC_EXPORTS}"
>$BASE_DIRS{PUBLIC_EXPORTS}</a></h2>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{USERS_TRANSLATIONS}"
>$BASE_DIRS{USERS_TRANSLATIONS}</a></h2>

<p>Users contributed translations directory</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$BASE_DIRS{SFTP_HOME}"
>$BASE_DIRS{SFTP_HOME}</a></h2>

<p>sftp home directory,
only for producers platform</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_files_for_taxonomy(_$tagtype_)"
>get_files_for_taxonomy( $tagtype )</a></h2>

<p>Taxonomy .txt source files are stored in the /taxonomies directory.</p>

<p>Some Product Opener flavors (Open Food Facts,
Open Beauty Facts etc.) can have different taxonomies for the same tag type.
e.g.
OFF and OBF can have different taxonomies for categories and ingredients.</p>

<p>Other categories like countries and languages are common to all flavors.</p>

<p>Taxonomies specific to a flavor are stored in /taxonomies/[product type]</p>

<p>e.g.
OFF ingredients are in /taxonomies/food/ingredients.txt and OBF ingredients are in /taxonomies/beauty/ingredients.txt</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_path_for_taxonomy(_$tagtype,_$product_type_)"
>get_path_for_taxonomy( $tagtype,
$product_type )</a></h2>

<p>full path for taxonomy file</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="base_paths()"
>base_paths()</a></h2>

<p>Return the list of base paths as a hashmap</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="check_missing_dirs()"
>check_missing_dirs()</a></h2>

<p>Check main directories,
needed for the project to run,
exists</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Return"
>Return</a></h3>

<p>A ref to a list of missing paths</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ensure_dir_created($path,_$mode=oct(755))"
>ensure_dir_created($path,
$mode=oct(755))</a></h2>

<p>Ensure a multiple path is created but die if a fundamental path is missing</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ensure_dir_created_or_die($path,_$mode=0755)"
>ensure_dir_created_or_die($path,
$mode=0755)</a></h2>

<p>Ensure a multiple path is created but die if a fundamental path is missing</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="base_paths_loading_script()"
>base_paths_loading_script()</a></h2>

<p>Return a sh script to define environment variables</p>

<p>You can then use it in a script by running:</p>

<p><code>.
&#60;(perl -e &#39;use ProductOpener::Paths qw/:all/; print base_paths_loading_script()&#39;)</code></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
