<html><head><title>ProductOpener::Numbers</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="simple.min" type="text/css" href="../simple.min.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.42,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.034000 at Thu Oct  5 12:19:14 2023 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#remove_insignificant_digits(%24)'>remove_insignificant_digits($)</a>
    <li class='indexItem indexItem2'><a href='#convert_string_to_number(%24)'>convert_string_to_number($)</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ProductOpener::Numbers - normalize numbers sent as strings in various formats with different sets of separators for digit grouping and to indicate decimals.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="remove_insignificant_digits($)"
>remove_insignificant_digits($)</a></h2>

<p>Some apps send us nutrient values that they have stored internally as floating point numbers.</p>

<p>So we get values like:</p>

<p>2.9000000953674 1.6000000238419 0.89999997615814 0.359999990463256 2.5999999046326</p>

<p>On the other hand,
when we get values like 2.0,
2.50 or 2.500,
we want to keep the trailing 0s.</p>

<p>The goal is to keep the precision if it makes sense.
The tricky part is that we do not know in advance how many significant digits we can have,
it varies from products to products,
and even nutrients to nutrients.</p>

<p>The desired output is thus:</p>

<p>2.9000000953674 -&#62; 2.9 1.6000000238419 -&#62; 1.6 0.89999997615814 -&#62; 0.9 0.359999990463256 -&#62; 0.36 2.5999999046326 -&#62; 2.6 2 -&#62; 2 2.0 -&#62; 2.0 2.000 -&#62; 2.000 2.0001 -&#62; 2 0.0001 -&#62; 0.0001</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="convert_string_to_number($)"
>convert_string_to_number($)</a></h2>

<p>Try to convert a number represented as a string to the actual number,
by guessing which characters (spaces,
commas,
dots) are used as digit grouping separators or used to indicate decimals.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
