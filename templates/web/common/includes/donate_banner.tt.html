<!-- start templates/[% component.name %] -->

[% banner_main = BLOCK %]

<section id="donation-banner-top" class="donation-banner row">
  <div class="donation-banner__left-aside">
    <div class="donation-banner__hook-section">
      <p>[% lang("donation_hook_2024") %]</p>
    </div>
    <img src="/images/misc/donation-banners/donation-banner-group-photo.png" alt="group photo donation 2024" />
  </div>
  <div>
    <div class="donation-banner__aside">
      <div class="donation-banner__main-section">
        <img
          width="50"
          height="50"
          src="https://world.openfoodfacts.org/images/logos/logo-variants/CMJN-ICON_WHITE_BG_OFF.svg"
          alt="open food facts logo"
        />
        <h3 class="donation-banner__main-title">[% lang("donation_title_2024") %]</h3>
      </div>
      <div style="padding:1rem;">
        <p>[% lang("donation_list_2024_main") %]</p>
        <ul>
          <li>
            [% lang("donation_list_2024_first") %]
            <ul>
              <li>[% lang("donation_list_2024_first_sub") %]</li>
            </ul>
          </li>
          <li>
            <p>[% lang("donation_list_2024_second") %]</p>
          </li>
          <li>
            <p>[% lang("donation_list_2024_third") %]</p>
          </li>
          <li>
            <p>[% lang("donation_list_2024_fourth") %]</p>
          </li>
        </ul>
      </div>
    </div>
    <div class="donation-banner__actions-section">
      <div class="donation-banner__actions-section__financial">
        <p>
          [% IF cc == "fr" %]
          (déductible à 66 % de vos impôts: ex. un don de 20€ vous reviendra à 6,80€)
          [% ELSE %]
          [% lang("donation_financial_2024_text") %]  
          [% END %]
        </p>
      </div>
      <div class="donation-banner__actions-section__donate-button">
        <a href="[% IF lc == "fr" %]https://open-food-facts.assoconnect.com/collect/description/476750-c-faire-un-don-a-open-food-facts[% ELSE %][% link %][% END %]?utm_source=off&utf_medium=web&utm_campaign=donate-2024-a&utm_term=en-text-button">
          <button>[% lang("donation_button_2024_text") %]</button>
        </a>
      </div>
    </div>
  </div>
  <div class="donation-banner__close">
    <button id="hide-donate-banner" class="material-icons modest" onclick="DonationButton();" onkeypress="DonationButton();">close</button>
  </div>
</section>

<script>
  let d = new Date();
  let bannerID = document.getElementById('donation-banner-top');
  let getDomain = window.location.origin.split('.');

  function setBannerCookie(bcname, bcval, bcexdays) {
    d.setTime(d.getTime() + (bcexdays*60*60*24*1000));
    let expires = 'expires=' + d.toUTCString();
    // Apply cookie for every domain contains open...facts
    let domain = 'domain=.' + getDomain.slice(1).join('.');
    document.cookie = bcname + '=' + bcval + ';' + expires + ';' + domain + ';SameSite=None;Secure;path=/';
  }
  
  function getBannerCookie(bcname) {
    const name = bcname + '=';
    const decodedCookies = decodeURIComponent(document.cookie);
    const cookies = decodedCookies.split(';');
    for (const cookie of cookies) {
      let c = cookie;
      while (c.charAt(0) == ' ') { c = c.substring(1); }
      if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); }
    }
    
    return '';
  }

  function DonationButton() {
    setBannerCookie('off_donation_banner_2024_a', 1, 180);
    bannerID.style.display = 'none';
  }

  if (getBannerCookie('off_donation_banner_2024_a') !== '') {
    bannerID.style.display = 'none';
  } else { 
    bannerID.style.display = 'flex';
  }
</script>

[% END %]

<!-- Donation banner @ footer -->
[% banner_footer = BLOCK %]

<section class="donation-banner-footer row">
  <div class="donation-banner-footer__left-aside">
    <div class="donation-banner-footer__hook-section">
      <p>[% lang("donation_hook_2024") %]</p>
    </div>
    <img src="/images/misc/donation-banners/donation-banner-group-photo.png" alt="group photo donation 2024" />
  </div>
  <div>
    <div>
      <div class="donation-banner-footer__main-section">
        <img
          width="50"
          height="50"
          src="https://world.openfoodfacts.org/images/logos/logo-variants/CMJN-ICON_WHITE_BG_OFF.svg"
          alt="open food facts logo"
        />
        <h3 class="donation-banner-footer__main-title">[% lang("donation_title_2024") %]</h3>
      </div>
      <p>[% lang("donation_list_2024_main") %]</p>
      <ul>
        <li>
          [% lang("donation_list_2024_first") %]
          <ul>
            <li>[% lang("donation_list_2024_first_sub") %]</li>
          </ul>
        </li>
        <li>
          <p>[% lang("donation_list_2024_second") %]</p>
        </li>
        <li>
          <p>[% lang("donation_list_2024_third") %]</p>
        </li>
        <li>
          <p>[% lang("donation_list_2024_fourth") %]</p>
        </li>
      </ul>
    </div>
    <div class="donation-banner-footer__actions-section">
      <div class="donation-banner-footer__actions-section__financial">
        <p>
          [% lang("donation_financial_2024_text") %]
        </p>
      </div>
      <div class="donation-banner-footer__actions-section__donate-button">
        <a href="[% IF lc == "fr" %]https://open-food-facts.assoconnect.com/collect/description/476750-c-faire-un-don-a-open-food-facts[% ELSE %][% link %][% END %]?utm_source=off&utf_medium=web&utm_campaign=donate-2024-a&utm_term=en-text-button">
          <button>[% lang("donation_button_2024_text") %]</button>
        </a>
      </div>
    </div>
  </div>
</section>

[% END %]

<!-- end templates/[% component.name %] -->
